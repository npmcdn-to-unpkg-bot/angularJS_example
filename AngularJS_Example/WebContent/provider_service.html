<!DOCTYPE html>
<html ng-app="provider">
<head>
<meta charset="utf-8">
<title>provider_service</title>
<script src="libs/angular/angular.js"></script>
<script type="text/javascript">
	function Calculator() {
		this.lastValue = 0;
		
		this.add = function(a,b) {
			var returnV = a+b;
			this.lastValue = returnV;
			return returnV;
		};
		
		this.minus = function(a,b) {
			var returnV = a-b;
			this.lastValue = returnV;
			return returnV;			
		};
	}
	
	angular.module('provider', [])
	// factory에서 Calculator 객체의 인스턴스를 new를 이용해 생성
	.factory('calcByF', [function(){
		return new Calculator();
	}])
	// service에서 Calculator 생성자 함수 레퍼런스만 전달
	// Calculator가 서비스를 주입받으려면 생성자 함수에서 인자로 받기만 하면 됨 - service에서는 reference만 전달하면 메소드 내부에서 의존관계를 설정한다. 
	.service('calcByS', Calculator)
	.controller('mainCtrl', function($scope, calcByS, calcByF) {
		$scope.val1 = calcByF.add(10,3);
		console.log(calcByF.lastValue);
		$scope.val2 = calcByS.minus(20,10);
		console.log(calcByS.lastValue);
	});
</script>
</head>
<body ng-controller="mainCtrl">
	<p> 10+3 = {{val1}} </p>
	<p> 20 - 10 = {{val2}} </p>
</body>
</html>